<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>resources/market.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Account.html">Account</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#deleteMessage">deleteMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#deleteMessageThreadWith">deleteMessageThreadWith</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#getMessages">getMessages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#postMessageTo">postMessageTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#setIsOnVacation">setIsOnVacation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Account.html#setLanguage">setLanguage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Cart.html">Cart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#addArticle">addArticle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#checkout">checkout</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#empty">empty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#getAvailableShippingMethods">getAvailableShippingMethods</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#removeArticle">removeArticle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#setShippingAddress">setShippingAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#setShippingMethod">setShippingMethod</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Cart.html#updateArticles">updateArticles</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Market.html">Market</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#findMetaproducts">findMetaproducts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#findProducts">findProducts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#findUsers">findUsers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getArticles">getArticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getArticlesByUser">getArticlesByUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getExpansionSingles">getExpansionSingles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getGameExpansions">getGameExpansions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getGames">getGames</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getMetaproduct">getMetaproduct</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getProduct">getProduct</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Market.html#getUser">getUser</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-MkmApi.MkmApi.html">MkmApi</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-MkmApi.MkmApi.html#makeCall">makeCall</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="OAuthHelper.html">OAuthHelper</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="OAuthHelper.html#buildAuthorizationHeader">buildAuthorizationHeader</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="OAuthHelper.html#buildBaseOauthHeaders">buildBaseOauthHeaders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="OAuthHelper.html#buildOauthHeaders">buildOauthHeaders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="OAuthHelper.html#buildSignature">buildSignature</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="OAuthHelper.html#changeUser">changeUser</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Orders.html">Orders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#acceptCancellation">acceptCancellation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#cancel">cancel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#confirmReception">confirmReception</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#evaluate">evaluate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#getOrderById">getOrderById</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#getOrders">getOrders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#markAsSent">markAsSent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#modifyOrder">modifyOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#requestCancellation">requestCancellation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Orders.html#setTrackingNumber">setTrackingNumber</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Stock.html">Stock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#change">change</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#dereaseAmmount">dereaseAmmount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#findArticles">findArticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#getArticle">getArticle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#getInShoppingCart">getInShoppingCart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stock.html#increaseAmmount">increaseAmmount</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MkmApi.html">MkmApi</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">resources/market.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Market endpoints
 */
export class Market {
    /**
     * Main constructor
     * @private
     * @param {MkmApi} api Parent api to make the calls
     */
    constructor(api) {
        this.api = api;
    }

    /**
     * Get all available games in MKKM
     * @return {Promise} List of available games
     */
    async getGames() {
        return this.api.makeCall('games', 'GET', null, true);
    }

    /**
     * Get MetaProduct information (a MetaProduct is a card info with all reprints and versions)
     * @param  {Number}  idMetaproduct MetaProduct id
     * @return {Promise}               MetaProduct information
     */
    async getMetaproduct(idMetaproduct) {
        return this.api.makeCall(`metaproducts/${idMetaproduct}`, 'GET', null, true);
    }

    /**
     * Search for metaproducts by card name
     * @param  {String}  name           String to match
     * @param  {Boolean} [isExact=true] Only return exact matches
     * @param  {Number}  [idLanguage=1] Search string in card names in an specific language
     * (1 is English)
     * @param  {Number}  [idGame=1]     Search cards of a specific game (1 is Magic)
     * @return {Promise}                List of all matched metaproducts
     */
    async findMetaproducts(name, isExact = true, idLanguage = 1, idGame = 1) {
        const queryParams = {
            search: name,
            exact: isExact,
            idGame,
            idLanguage
        };
        return this.api.makeCall('metaproducts/find', 'GET', null, true, queryParams);
    }

    /**
     * Get product information by id
     * @param  {Number}  idProduct id of the product
     * @return {Promise}           product information
     */
    async getProduct(idProduct) {
        return this.api.makeCall(`products/${idProduct}`, 'GET', null, true);
    }

    /**
     * Find products by name
     * @param  {String}  name              Search string to use
     * @param  {Boolean} [isExact=true]    Only return exact matches
     * @param  {Number}  [start=null]      Pagination start parameter
     * (if defined maxResults must be defined)
     * @param  {Number}  [maxResults=null] Page size for pagination
     * @param  {Number}  [idLanguage=1]    Search string in card names in an specific language
     * (1 is English)
     * @param  {Number}  [idGame=1]        Search cards of a specific game (1 is Magic)
     * (if defined start must be defined)
     * @return {Promise}                   List of all products that matches the query
     */
    async findProducts(name, isExact = true, start = null, maxResults = null,
        idLanguage = 1, idGame = 1) {
        if ((start !== null &amp;&amp; maxResults === null) || (maxResults != null &amp;&amp; start === null)) {
            throw Error('Start and maxResults both must be provided');
        }
        const queryParams = {
            search: name,
            exact: isExact,
            idGame,
            idLanguage
        };
        if (start !== null) {
            queryParams.start = start;
            queryParams.maxResults = maxResults;
        }
        return this.api.makeCall('products/find', 'GET', null, true, queryParams);
    }

    /**
     * Get all expansions of a game
     * @param  {Number}  idGame id of the game
     * @return {Promise}        List of game expansions
     */
    async getGameExpansions(idGame) {
        return this.api.makeCall(`games/${idGame}/expansions`, 'GET', null, true);
    }

    /**
     * Get all card (products) in a single expansion
     * @param  {Number}  idExpansion id of the expansion
     * @return {Promise}             List of products in the expansion.
     */
    async getExpansionSingles(idExpansion) {
        return this.api.makeCall(`expansions/${idExpansion}/singles`, 'GET', null, true);
    }

    /**
     * Get all the offers for a product that matches the search parameters. &lt;br>
     * **Attention:** Only 1.000 articles will be returned if there are more than that you must
     * use the {@link searchParams.start} and {@link searchParams.maxResults} to paginate the query.
     * @param  {Number}  idProduct    id of the Product
     * @param  {Object}  [searchParams] Search parameters
     * @param  {('private'|'commercial'|'powerseller')}  [searchParams.userType] Filter results
     * by the type of seller
     * @param  {(1|2|3|4|5)}  [searchParams.minUserScore] Filter results by the seller score
     * @param  {Number}  [searchParams.idLanguage] Filter results by language
     * @param  {('MT'|'NM'|'EX'|'GD'|'LP'|'PL'|'PO')}  [searchParams.minCondition] Filter results
     * by condition
     * @param  {Boolean}  [searchParams.isFoil] Filter results by foiling
     * @param  {Boolean}  [searchParams.isSigned] Filter results by being signed or not
     * @param  {Boolean}  [searchParams.isAltered] Filter results by being altered or not
     * @param  {Number}  [searchParams.minAvailable] Filter results elements available from the user
     * @param  {Number}  [searchParams.start]       Pagination start parameter
     * (if defined maxResults must be defined)
     * @param  {Number}  [searchParams.maxResults] Page size for pagination
     * (if defined start must be defined)
     * @return {Promise}  List of all articles matching the query
     */
    async getArticles(idProduct, searchParams) {
        return this.api.makeCall(`products/articles${idProduct}`, 'GET', null, true, searchParams);
    }

    /**
     * Get user by id or exact name
     * @param  {Number|String}  idOrName id of the user or exact name
     * @return {Promise}        User information
     */
    async getUser(idOrName) {
        return this.api.makeCall(`users/${idOrName}`, 'GET', null, true);
    }

    /**
     * Search for users by name
     * @param  {String}  search Search string (min length of 3)
     * @return {Promise}        List of users matching the query, max 50 elements are returned
     */
    async findUsers(search) {
        return this.api.makeCall('users/find', 'GET', null, true, { search });
    }

    /**
     * Get all articles for a game that an user is selling &lt;br>
     * **Attention:** Only 1.000 articles will be returned if there are more than that you must
     * use the {@link searchParams.start} and {@link searchParams.maxResults} to paginate the query.
     * @param  {Number}  idUser            User id
     * @param  {Number}  [start=null]      Pagination start parameter
     * (if defined maxResults must be defined)
     * @param  {Number}  [maxResults=null] Page size for pagination
     * (if defined start must be defined)
     * @param  {Number}  [idGame=1]        Filter articles of a specific game (1 is Magic)
     * @return {Promise}                   List all articles of the specified game from that user.
     */
    async getArticlesByUser(idUser, start = null, maxResults = null, idGame = 1) {
        if ((start !== null &amp;&amp; maxResults === null) || (maxResults != null &amp;&amp; start === null)) {
            throw Error('Start and maxResults both must be provided');
        }
        const queryParams = { idGame };
        if (start !== null) {
            queryParams.start = start;
            queryParams.maxResults = maxResults;
        }
        return this.api.makeCall(`users/${idUser}/articles`, 'GET', null, true, queryParams);
    }
}

export default Market;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jan 13 2019 14:42:32 GMT+0100 (Hora estándar romance) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
